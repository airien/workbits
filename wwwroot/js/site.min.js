function opp(){kjor("robot/connected",'{"command":"backward","key":"abc1236"}')}function ned(){kjor("robot/connected",'{"command":"forward","key":"abc1236"}')}function venstre(){kjor("robot/connected",'{"command":"right","key":"abc1236"}')}function hoyre(){kjor("robot/connected",'{"command":"left","key":"abc1236"}')}function stopp(){kjor("robot/connected",'{"command":"stop","key":"abc1236"}')}function test(){kjor("$SYS/broker/version","")}function kjor(n,t){console.log("kj\u00f8rer: ",n,t);message=new Paho.MQTT.Message(t);message.destinationName=n;client.send(message);console.log("msg sent...")}function init(){client.connect(options)}var wsbroker="broker.hivemq.com",wsport=Number(8e3),client=new Paho.MQTT.Client(wsbroker,wsport,"myclientid_"+parseInt(Math.random()*100,10)),options;client.onConnectionLost=function(n){console.log("connection lost: "+n.errorMessage)};client.onMessageArrived=function(n){console.log(n.destinationName," -- ",n.payloadString)};options={timeout:3,onSuccess:function(){console.log("mqtt connected")},onFailure:function(n){console.log("Connection failed: "+n.errorMessage)}};$(document).ready(function(){$("#up").mousedown(function(){opp()});$("#up").mouseup(function(){stopp()});$("#down").mousedown(function(){ned()});$("#down").mouseup(function(){stopp()});$("#left").mousedown(function(){venstre()});$("#left").mouseup(function(){stopp()});$("#right").mousedown(function(){hoyre()});$("#right").mouseup(function(){stopp()});var n=!1;$(document).keydown(function(t){if(!n){n=!0;console.log("key down: ",t.keyCode);switch(t.keyCode){case Number(38):opp();break;case Number(40):ned();break;case Number(39):hoyre();break;case Number(37):venstre()}}});$(document).keyup(function(){n=!1;stopp()});$("#test").mousedown(function(){test()});init()});